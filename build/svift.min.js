var SVIFT={};SVIFT.helper={},SVIFT.helper.debouncer=function(t,e){var a,n=e||200;return function(){var e=this,i=arguments;clearTimeout(a),a=setTimeout(function(){t.apply(e,Array.prototype.slice.call(i))},n)}},SVIFT.helper.interpolate=function(t){var e,a={};for(a.def=t,a.interpolate=[],a.duration=0,e=1;a.def.length>e;e++)"ease"in a.def[e]||(a.def[e].ease=!1),a.interpolate.push(d3.interpolate(a.def[e-1].value,a.def[e].value)),a.duration+=a.def[e].duration;var n=0;for(e=1;a.def.length>e;e++)a.def[e].duration=a.def[e].duration/a.duration,a.def[e].start=n,n+=a.def[e].duration;return a.i=function(t){for(var e=1;a.def.length>e;e++)if(t>=a.def[e].start&&a.def[e].start+a.def[e].duration>=t)return a.def[e].ease?a.interpolate[e-1](a.def[e].ease((t-a.def[e].start)/a.def[e].duration)):a.interpolate[e-1]((t-a.def[e].start)/a.def[e].duration)},a.i},SVIFT.helper.switchCol=function(t,e,a){return t.forEach(function(t){var n=t[e];t[e]=t[a],t[a]=n}),t},SVIFT.helper.transpose=function(t){var e={};return t.forEach(function(t){for(var a in t)a in e||(e[a]=[])}),t.forEach(function(t){for(var a in e)a in t?e[a].push(t[a]):e[a].push(null)}),e},SVIFT.helper.cleanAxis=function(t){var e;e=t.attr("text-anchor")?t:t.select('g[text-anchor="*"]');var a=e.attr("text-anchor");e.selectAll("text").attr("text-anchor",a);var n=e.attr("font-size");e.selectAll("text").each(function(){var t=d3.select(this);["y","x"].forEach(function(e){var a=t.attr("d"+e);if(a){a.indexOf("em")>=0&&(a=parseFloat(a.substr(0,a.length-2))*n),t.attr("d"+e,0);var i=t.attr(e);i&&(a+=parseFloat(i)),t.attr(e,a)}})})},SVIFT.render=function(){function t(t){return t.each(function(){var t=d3.select(this),e=t.attr("font-size");t.selectAll("text").each(function(){var t=d3.select(this);["y","x"].forEach(function(a){var n=t.attr("d"+a);if(n){n.indexOf("em")>=0&&(n=parseFloat(n.substr(0,n.length-2))*e),t.attr("d"+a,0);var i=t.attr(a);i&&(n+=parseFloat(i)),t.attr(a,n)}})})}),!0}console.log("0.0.5");var e,a,n,i,o={},r={init:!1,setup:!1,gif:!1,gifStep:0,buildStep:0},s={status:0,full:{svg:0,png:0,social:0,gif:0}},d=JSON.parse(JSON.stringify(s)),c=500,l=500,f={},g={},u=[["fill","fill"],["font-family","fontFamily"],["font-size","fontSize"],["font-weight","fontWeight"],["text-anchor","textAnchor"],["stroke","stroke"],["stroke-width","strokeWidth"]],h={video:{size:{width:500,height:500},scale:{width:500,height:500},frames:120},sizes:[{file:"instagram",name:"Instagram",size:{width:540,height:540},scale:{width:1080,height:1080}},{file:"linkedin",name:"LinkIn",size:{width:700,height:400},scale:{width:1400,height:800}},{file:"google",name:"Google+",size:{width:497,height:373},scale:{width:994,height:746}},{file:"tumblr",name:"Tumblr",size:{width:640,height:960},scale:{width:1280,height:1920}},{file:"pinterest",name:"Pinterest",size:{width:600,height:600},scale:{width:1200,height:1200}},{file:"twitter",name:"Twitter",size:{width:512,height:256},scale:{width:1024,height:512}},{file:"snapchat",name:"Snapchat",size:{width:476,height:810},scale:{width:952,height:1620}},{file:"facebook",name:"Facebook",size:{width:600,height:315},scale:{width:1200,height:630}},{file:"horizontal",name:"Horizontal / Landscape",size:{width:1024,height:768},scale:{width:2048,height:1536}},{file:"vertical",name:"Vertical / Portrait",size:{width:800,height:1200},scale:{width:1600,height:2400}},{file:"square",name:"Square",size:{width:512,height:512},scale:{width:1024,height:1024}}]},p={};return h.sizes.forEach(function(t,e){p[t.file]=e}),o.init=function(){r.running||(r.running=!0,e=d3.select("body").append("div").attr("id","offscreen-svg").style("visibility","hidden").style("pointer-events","none").style("top",0).style("left",0).style("z-index",999).style("position","absolute"),o.resizeSVG(c,l,0,0))},o.setupVis=function(t){r.setup=!0,a=t,e.select("svg").remove(),n=SVIFT.vis[a.vis.type](a,e),n.setScale(!0),n.init(),n.setScale(!1)},o.drawSVG=function(t){n.goTo(t)},o.resizeSVG=function(t,a,i,o){r.setup?(n.setScale(!1),e.select("svg").style("width",t+"px").style("height",a+"px"),n.preResize(),n.setScale(!0),e.select("svg").style("width",i+"px").style("height",o+"px"),n.preResize()):e.select("svg").style("width",t+"px").style("height",a+"px")},o.inlineCSS=function(){d3.selectAll("#offscreen-svg svg g, #offscreen-svg svg text, #offscreen-svg svg path, #offscreen-svg svg rect, #offscreen-svg svg circle, #offscreen-svg svg line, #offscreen-svg svg ellipse, #offscreen-svg svg tspan, #offscreen-svg svg title").each(function(){var t=d3.select(this),e=window.getComputedStyle(t.node());u.forEach(function(a){var n=e[a[1]];null!==t.attr(a[0])&&(n=t.attr(a[0])),t.style(a[0],n)})})},o.buildPNG=function(t,e){if(r.setup&&r.running&&!r.gif){var a=h.sizes[p[t]];o.resizeSVG(a.size.width,a.size.height,a.scale.width,a.scale.height),n.reset(),o.drawSVG(1),o.inlineCSS(),o.toDataURL(function(a){f[t]=a,g[t]=o.getSVG(),e()})}else console.log("Either render not initialised or currently rendering a GIF.")},o.toDataURL=function(t){toDataURL(document.getElementById("offscreen-svg").children[0],"image/png",{callback:t})},o.buildGif=function(t){r.setup&&r.running&&!r.gif&&(r.gif=!0,r.gifStep=0,o.resizeSVG(h.video.size.width,h.video.size.height,h.video.scale.width,h.video.scale.height),n.reset(),i=new GIF({workers:3,quality:1,repeat:0,debug:!0,width:h.video.size.width,height:h.video.size.height}).on("progress",function(t){s.full.gif=t}).on("finished",function(e){f.video=URL.createObjectURL(e),r.gif=!1,i.freeWorkers.forEach(function(t){t.terminate()}),t()}),o.preFrame())},o.preFrame=function(){o.drawSVG(1),o.inlineCSS(),o.toDataURL(function(t){var e=new Image;e.crossOrigin="*",e.onload=function(){i.addFrame(e,{delay:1,copy:!0}),n.reset(),o.addFrame()},e.src=t})},o.addFrame=function(){o.drawSVG(r.gifStep/h.video.frames),o.inlineCSS(),o.toDataURL(function(t){var e=new Image;e.crossOrigin="*",e.onload=function(){i.addFrame(e,{delay:30,copy:!0}),r.gifStep++,r.gifStep>=h.video.frames?(i.addFrame(e,{delay:4e3,copy:!0}),i.render()):o.addFrame()},e.src=t})},o.buildSet=function(){s=JSON.parse(JSON.stringify(d)),r.buildStep=0,o.buildNextPNG()},o.buildNextPNG=function(){o.buildPNG(h.sizes[r.buildStep].file,function(){r.buildStep++,r.buildStep>=h.sizes.length?(s.full.png=1,s.full.social=1,o.buildGif(function(){s.full.gif=1,s.status=1})):o.buildNextPNG()})},o.getStatus=function(){return s},o.downloadGIF=function(){o.generateDownload("video")},o.generateDownload=function(t,e){var a=document.createElement("a");"svg"===e?(a.download=t+".svg",a.href=g[t]):(a.download=t+("video"===t?".gif":".png"),a.href=f[t]),document.body.appendChild(a),a.click()},o.getSVG=function(){var e=d3.selectAll('#offscreen-svg g[text-anchor="middle"]');e.selectAll("text").attr("text-anchor","middle"),t(e),e=d3.selectAll('#offscreen-svg g[text-anchor="end"]'),e.selectAll("text").attr("text-anchor","end"),t(e);var a=d3.select("#offscreen-svg").html(),n=[["sans-serif","Verdana"],['width="100%"','width="'+c+'"'],['height="100%"','height="'+l+'"'],["<svg",'<?xml version="1.0" standalone="no"?><svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"']];return n.forEach(function(t){a=a.split(t[0]).join(t[1])}),"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(a)},o}(),SVIFT.vis={},SVIFT.vis.base=function(t,e){var a={};return a.data=t,a.setData=function(t){a.data.data=t},a.container=e,a.g=null,a.svg=null,a.scale=!1,a.vizContainer=null,a.vizSize={width:500,height:500},a.vizInitSize={width:500,height:500},a.containerSize={width:0,height:0},a.theme=t.style.theme,a.color=t.style.color.main,a.custom=null,a.bg=null,a.config={maxWidth:4096,maxHeight:4096,margin:{top:20,right:20,bottom:20,left:20},font:{sizes:{450:15,0:13},"default":"13px"},footerHeight:40,custom:!1},a.text={},a.timeline={},a.init=function(){a.scale=!1,a.vizInitSize.width=a.containerSize.width=a.container.node().offsetWidth,a.vizInitSize.height=a.containerSize.height=a.container.node().offsetHeight,a.vizSize.width=a.vizInitSize.width-a.config.margin.right-a.config.margin.left,a.vizSize.height=a.vizInitSize.height,a.svg=a.container.append("svg").style("background-color","#ffffff").attr("viewBox","0 0 "+a.containerSize.width+" "+a.containerSize.height).attr("class",a.theme+" "+a.color),a.defs=a.svg.append("defs"),a.bg=a.svg.append("rect").style("fill","#fff").style("border","2px solid #fff"),a.g=a.svg.append("g").attr("transform","translate("+a.config.margin.top+","+a.config.margin.left+")"),a.custom=a.g.append("g"),a.data.custom&&(a.custom.attr("transform","translate("+(("left"==a.data.custom.logo.align?0:"right"==a.data.custom.logo.align?a.vizInitSize.width-a.config.margin.left-a.config.margin.right:a.vizInitSize.width/2-a.config.margin.left)+a.data.custom.logo.x_offset)+","+(("bottom"==a.data.custom.logo.valign?a.vizInitSize.height-(a.config.margin.bottom+a.config.margin.top):a.config.margin.top)+a.data.custom.logo.y_offset)+")"),a.custom.append("image").attr("xlink:href",a.data.custom.logo.url).attr("width",a.data.custom.logo.width).attr("height",a.data.custom.logo.height).attr("x","left"==a.data.custom.logo.align?0:"right"==a.data.custom.logo.align?-a.data.custom.logo.width:-a.data.custom.logo.width/2).attr("y","bottom"==a.data.custom.logo.valign?-a.data.custom.logo.height:0)),a.text.head=a.g.append("g").attr("class","title-wrapper"),a.text.title=a.text.head.append("text").attr("class","titleFont"),a.text.subtitle=a.text.head.append("text").attr("class","subtitleFont"),a.text.foot=a.g.append("g").attr("transform","translate(0,"+(a.containerSize.height-a.config.margin.bottom-a.config.margin.top)+")").attr("class","bottomTextWrapper"),a.text.attribution=a.text.foot.append("text").attr("x",a.containerSize.width-a.config.margin.left-a.config.margin.right).text(a.data.data.attribution).attr("class","attribution"),a.text.source=a.text.foot.append("text").text(a.data.data.source).attr("class","source"),a.vizContainer=a.g.append("g").attr("class","viz-container"),a.playHead=0,a.setup(),a.updateHead();for(var t in a.timeline){var e=a.timeline[t];e.end>a.playTime&&(a.playTime=e.end)}a.time.step=a.playTime/(a.playTime/1e3*a.time.fps),"function"==typeof window.callPhantom&&window.callPhantom({msg:"setupDone"}),d3.select(window).on("resize",SVIFT.helper.debouncer(function(){a.preResize(),a.scale||a.resize()},200))},a.updateHead=function(){var t=30,e=0,n=1.1,i=t;if(a.vizSize.width=a.vizInitSize.width-a.config.margin.left-a.config.margin.right,a.data.data.title.length>0){var o=a.data.data.title.split("\n");a.text.title.selectAll("tspan").remove(),o.forEach(function(e){for(var n=t,o=a.text.title.append("tspan").text(e).attr("x",0).style("font-size",n+"px");o.node().getComputedTextLength()>a.vizSize.width&&n>8;)n--,o.style("font-size",n+"px");i>n&&(i=n)}),a.text.title.attr("transform","translate(0,"+i+")"),a.text.title.selectAll("tspan").style("font-size",i+"px").attr("dy",function(t,e){return e>0?i*n:0}),e=i*n*(o.length-1)+i}var r=15,s=1.1,d=0,c=r>i?.75*i:r;a.data.data.subTitle.length>0&&(o=a.data.data.subTitle.split("\n"),a.text.subtitle.selectAll("tspan").remove(),o.forEach(function(t){for(var e=r,n=a.text.subtitle.append("tspan").text(t).attr("x",0).style("font-size",e+"px");n.node().getComputedTextLength()>a.vizSize.width&&e>5;)e--,n.style("font-size",e+"px");c>e&&(c=e)}),a.text.subtitle.selectAll("tspan").attr("dy",function(t,e){return e>0?c*s:0}).style("font-size",c+"px"),a.text.subtitle.attr("transform","translate(0,"+Math.round(e+1.55*c)+")"),d+=2*c+c*s*(o.length-1)),a.vizContainer.attr("transform","translate(0,"+(d+e)+")"),a.vizSize.height=a.vizInitSize.height-(d+e)-a.config.margin.top-a.config.margin.bottom-a.config.footerHeight-15,a.text.foot.attr("transform","translate(0,"+(a.vizInitSize.height-a.config.margin.bottom-a.config.margin.top)+")"),a.data.custom&&a.custom.attr("transform","translate("+(("left"==a.data.custom.logo.align?0:"right"==a.data.custom.logo.align?a.vizInitSize.width-a.config.margin.left-a.config.margin.right:a.vizInitSize.width/2-a.config.margin.left)+a.data.custom.logo.x_offset)+","+(("bottom"==a.data.custom.logo.valign?a.vizInitSize.height-(a.config.margin.bottom+a.config.margin.top):a.config.margin.top)+a.data.custom.logo.y_offset)+")"),a.text.attribution.attr("x",a.vizInitSize.width-a.config.margin.left-a.config.margin.right),a.updateSource(),a.resize()},a.setTheme=function(t){a.svg.classed(a.theme,!1),a.theme=t,a.svg.classed(a.theme,!0),a.updateHead()},a.setColor=function(t){a.svg.classed(a.color,!1),a.color=t,a.svg.classed(a.color,!0),a.updateHead()},a.updateSource=function(){a.text.source.text(a.data.data.source)},a.reset=function(){a.playState=!1,a.playHead=0,a.vizContainer.selectAll("*").remove(),a.setup(),a.resize()},a.process=function(){},a.setup=function(){},a.update=function(){},a.preResize=function(){a.containerSize.width=a.container.node().offsetWidth,a.containerSize.height=a.container.node().offsetHeight,a.bg.attr("x",-2).attr("y",-2).attr("width",a.containerSize.width+4).attr("height",a.containerSize.height+4),a.scale||(a.svg.attr("viewBox","0 0 "+a.containerSize.width+" "+a.containerSize.height),a.vizInitSize.width=a.containerSize.width,a.vizInitSize.height=a.containerSize.height),a.updateHead()},a.setScale=function(t){a.scale=t},a.resize=function(){},a.draw=function(t){for(var e in a.timeline){var n=a.timeline[e];t>=n.start&&n.end>=t?n.func((t-n.start)/(n.end-n.start)):t>n.end?n.func(1):n.start>t&&n.func(0)}},a.playHead=0,a.playState=!1,a.playTime=0,a.time={fps:30,step:0,elapsed:0,fpsInterval:1e3/30,then:0,startTime:0,now:0},a.play=function(){a.playState&&("function"==typeof window.callPhantom?(a.playHead+=a.time.step,a.playTime>=a.playHead?(a.draw(a.playHead),window.callPhantom({msg:"drawDone",playHead:a.playHead})):(a.playHead=a.playTime,a.draw(a.playHead),a.pause(),window.callPhantom({msg:"playDone"}))):(0===a.time.then&&(a.time.then=a.time.startTime=Date.now()),a.time.now=Date.now(),a.time.elapsed=a.time.now-a.time.then,a.playTime>=a.time.now-a.time.startTime?(window.requestAnimationFrame(a.play),a.time.elapsed>a.time.fpsInterval&&(a.time.then=a.time.now-a.time.elapsed%a.time.fpsInterval,a.playHead=a.time.now-a.time.startTime,a.draw(a.playHead))):(a.playHead=a.playTime,a.goTo(1),a.pause())))},a.start=function(){a.playState=!0,a.play()},a.pause=function(){a.playState=!1},a.goTo=function(t){a.playTime>=t&&(a.playHead=t*a.playTime,a.draw(a.playHead)),a.pause()},a},SVIFT.vis.barchart=function(t,e){var a=SVIFT.vis.base(t,e);return a.d3config={ease:d3.easeBounce,xInterpolate:[],steps:t.data.data.length,showNumberLabels:t.data.showNumberLabels},a.setup=function(){a.d3config.barsContainer=a.vizContainer.selectAll("g").data(t.data.data).enter().append("g"),a.d3config.bars=a.d3config.barsContainer.append("rect").style("stroke","transparent").attr("class","visFill").style("opacity",0),a.d3config.barsText=a.d3config.barsContainer.append("text").text(function(t){var e="";return a.d3config.showNumberLabels&&(e=" ("+t.data[0]+")"),t.label+e}).attr("class","labelText").attr("font-size","1em").style("opacity",1),a.d3config.barsNumber=a.d3config.barsContainer.append("text").text(function(t){return t.data[0]}).attr("class","labelNumber").attr("text-anchor","middle").style("opacity",0),a.timeline={bars:{start:0,end:1500,func:a.barAnimation},text:{start:1500,end:3e3,func:a.textAnimation}}},a.update=function(){a.d3config.barsContainer.data(t.data.data).enter(),a.d3config.bars.datum(function(t){return t}),a.d3config.barsText.datum(function(t){return t}).text(function(t){return t.label})},a.resize=function(){var e=d3.max(t.data.data,function(t){return t.data[0]});a.d3config.y=d3.scaleBand().padding(.1).domain(t.data.data.map(function(t,e){return e})),a.d3config.x=d3.scaleLinear().domain([0,e]);var n=a.vizSize.height+20,i=a.vizSize.width;a.d3config.y.range([0,n]),a.d3config.x.range([i,0]),a.d3config.barsContainer.attr("transform","translate(0,"+a.d3config.y(0)+")"),a.d3config.bars.attr("y",function(t,e){return a.d3config.y(e)}).attr("height",a.d3config.y.bandwidth()).attr("opacity",0),t.data.data.forEach(function(t,e){a.d3config.xInterpolate[e]=d3.interpolate(0,i-a.d3config.x(t.data[0]))});var o=d3.interpolate(0,i-a.d3config.x(e))(1),r=a.d3config.barsText._groups[0][0].getBoundingClientRect().height;a.d3config.barsText.attr("x",function(t,e){return o/2>=a.d3config.xInterpolate[e](1)?a.d3config.xInterpolate[e](1)+10:a.d3config.xInterpolate[e](1)-10}).classed("white",function(t,e){return o/2>=a.d3config.xInterpolate[e](1)?!1:!0}).attr("y",function(t,e){return a.d3config.y(e)+a.d3config.y.bandwidth()/2+r/3}).attr("text-anchor",function(t,e){return o/2>=a.d3config.xInterpolate[e](1)?"start":"end"}).style("opacity",0),a.playHead==a.playTime&&(a.goTo(1),a.pause())},a.barAnimation=function(t){a.d3config.bars.style("opacity",1);for(var e=0;a.d3config.steps>e;e++)d3.select(a.d3config.bars._groups[0][e]).attr("width",function(){return a.d3config.xInterpolate[e](a.d3config.ease(t))})},a.textAnimation=function(t){0!==t&&a.d3config.barsText.style("opacity",1)},a},SVIFT.vis.columns=function(t,e){var a=SVIFT.vis.base(t,e);a.d3config={ease:d3.easeQuadOut,yInterpolate:[],hInterpolate:[],oInterpolate:[],steps:t.data.data.length,animation:{duration:3e3,barPartPercent:.8},showNumberLabels:t.data.showNumberLabels},a.setup=function(){a.d3config.barsContainer=a.vizContainer.append("g").selectAll("g").data(t.data.data).enter().append("g"),a.d3config.bars=a.d3config.barsContainer.append("rect").style("stroke","transparent").attr("class","visFill").style("opacity",1),a.d3config.barsText=a.d3config.barsContainer.append("text").text(function(t){return t.label}).attr("class","labelText").attr("text-anchor","middle").style("opacity",0),a.d3config.barsNumber=a.d3config.barsContainer.append("text").text(function(t){return t.data[0]}).attr("class","labelNumber").attr("text-anchor","middle").style("opacity",0);for(var e=a.d3config.animation.duration*a.d3config.animation.barPartPercent,n=e/a.d3config.steps,i=0;a.d3config.steps>i;i++){var o=n*i-n/2;0==i&&(o=0);var r=n*(i+1);a.timeline["animationBar"+i]={start:o,end:r,func:a["drawBar"+i]}}for(var s=a.d3config.animation.duration-e,d=s/a.d3config.steps,i=0;a.d3config.steps>i;i++){var o=d*i-d/2+e;0==i&&(o=e);var r=d*(i+1)+e;a.timeline["animationBarText"+i]={start:o,end:r,func:a["drawBarLable"+i]}}},a.update=function(){a.d3config.barsContainer.data(t.data.data).enter(),a.d3config.bars.datum(function(t){return t}),a.d3config.barsText.datum(function(t){return t}).text(function(t){return t.label}),a.d3config.barsNumber.datum(function(t){return t}).text(function(t){return t.data[0]})},a.resize=function(){a.d3config.x=d3.scaleBand().padding(.1).domain(t.data.data.map(function(t,e){return e})),a.d3config.y=d3.scaleLinear().domain([0,d3.max(t.data.data,function(t){return t.data[0]})]);var e=a.d3config.barsNumber._groups[0][0].getBBox().height;a.d3config.barsText._groups[0][0].getBBox().height;var n=6,i=e+n;a.d3config.barsContainer.attr("transform","translate(0,"+i+")");var o=a.vizSize.width,r=a.vizSize.height-i;a.d3config.x.range([0,o]),a.d3config.y.range([r,0]),a.d3config.bars.attr("x",function(t,e){return a.d3config.x(e)}).attr("width",a.d3config.x.bandwidth()).attr("opacity",0),a.d3config.barsText.attr("x",function(t,e){return a.d3config.x(e)+a.d3config.x.bandwidth()/2}).attr("y",function(){return this.getBBox().height+r+n}).attr("font-size","1em").attr("opacity",0),a.d3config.barsNumber.attr("x",function(t,e){return a.d3config.x(e)+a.d3config.x.bandwidth()/2}).attr("y",function(t){return a.d3config.y(t.data[0])-n}).attr("font-size","1em").attr("opacity",0),t.data.data.forEach(function(t,e){a.d3config.yInterpolate[e]=d3.interpolate(r,a.d3config.y(t.data[0])),a.d3config.hInterpolate[e]=d3.interpolate(0,r-a.d3config.y(t.data[0])),a.d3config.oInterpolate[e]=d3.interpolate(0,1)}),a.playHead==a.playTime&&(a.goTo(1),a.pause())};for(var n=function(t){return function(e){d3.select(a.d3config.bars._groups[0][t]).attr("y",function(){return a.d3config.yInterpolate[t](a.d3config.ease(e))}).attr("height",function(){return a.d3config.hInterpolate[t](a.d3config.ease(e))}).attr("opacity",function(){return a.d3config.oInterpolate[t](a.d3config.ease(e))})}},i=0;a.d3config.steps>i;i++)a["drawBar"+i]=n(i);for(var o=function(t){return function(e){d3.select(a.d3config.barsText._groups[0][t]).style("opacity",function(){return a.d3config.oInterpolate[t](a.d3config.ease(e))}),a.d3config.showNumberLabels&&d3.select(a.d3config.barsNumber._groups[0][t]).style("opacity",function(){return a.d3config.oInterpolate[t](a.d3config.ease(e))})}},i=0;a.d3config.steps>i;i++)a["drawBarLable"+i]=o(i);return a},SVIFT.vis.count=function(t,e){t.data.data[0].data[0]=Math.round(t.data.data[0].data[0]);var a=SVIFT.vis.base(t,e);return a.d3config={scale:1,ease:d3.easeCubicInOut,interpolate:d3.interpolate(0,t.data.data[0].data[0])},a.setup=function(){a.d3config.count=a.vizContainer.append("text").text(t.data.data[0].data[0]).attr("class","visFill labelTextFont").attr("text-anchor","middle").attr("font-size",13).attr("opacity",0)},a.resize=function(){var e=a.d3config.count.text();a.d3config.count.text(t.data.data[0].data[0]).attr("transform","scale(1)"),a.d3config.count.attr("transform",function(){var t=this.getBBox(),e=Math.min(a.vizSize.width/t.width,a.vizSize.height/t.height);return a.d3config.scale=.9*e,"translate("+a.vizSize.width/2+", "+(a.vizSize.height/2+.28*this.getBBox().height*a.d3config.scale)+") scale("+a.d3config.scale+")"}),a.d3config.count.text(e),a.playHead==a.playTime&&(a.goTo(1),a.pause())},a.animateNumber=function(t){var e=Math.round(a.d3config.interpolate(a.d3config.ease(t)));a.d3config.count.text(e).attr("opacity",1)},a.animateNumberEnd=function(e){0!==e&&a.d3config.count.text(t.data.data[0].data[0]).attr("opacity",1)},a.timeline={bars:{start:0,end:2900,func:a.animateNumber},barsEnd:{start:2900,end:3e3,func:a.animateNumberEnd}},a},SVIFT.vis.mosaic=function(t,e){var a=SVIFT.vis.base(t,e);return a.d3config={ease:d3.easeCubicInOut,interpolate:d3.interpolate(0,t.data.data[0].data[0])},a.gridSetupData=function(t){var e=.1*t;t-=e;for(var a=Array(),n=1,i=1,o=0;10>o;o++){a.push(Array());for(var r=0;10>r;r++)a[o].push({x:n,y:i,width:t,height:t}),n+=t+e;n=1,i+=t+e}return a},a.setup=function(){var e=a.gridSetupData(10);a.d3config.rowContainer=a.vizContainer.append("g"),a.d3config.row=a.d3config.rowContainer.selectAll(".row").data(e).enter().append("g").attr("class","row"),a.d3config.column=a.d3config.row.selectAll(".square").data(function(t){return t}).enter().append("rect").attr("class","square").style("fill",t.data.colors[0]).style("stroke","#fff"),a.d3config.mosaicValueText=a.vizContainer.append("text").text(t.data.data[0].data[0]+"%").attr("font-family",t.style.font).attr("class","visFill labelText big").attr("text-anchor","middle")},a.resize=function(){var t=12,e=a.vizSize.width-t,n=a.vizSize.height-t,i=Math.min(e,n);a.d3config.mosaicValueText.attr("font-size","2.5em").attr("dominant-baseline","hanging");var o=a.d3config.mosaicValueText.node().getBBox().height,r=i-o;a.d3config.mosaicValueText.attr("x",e/2);var s=r/10,d=a.gridSetupData(s);a.d3config.rowContainer.attr("transform","translate("+(e-r)/2+","+15+")"),a.d3config.row.data(d).enter(),a.d3config.column.data(function(t){return t}).enter(),a.d3config.column.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height});var c=a.d3config.rowContainer.node().getBBox().height;a.d3config.mosaicValueText.attr("y",c+o/2)},a.drawBars=function(t){var e=Math.round(a.d3config.interpolate(a.d3config.ease(t)));a.d3config.column.selectAll("rect")._parents.forEach(function(t,a){e-1>=a&&d3.select(t).attr("class","visFill")}),a.d3config.mosaicValueText.text(e+"%")},a.timeline={bars:{start:0,end:3e3,func:a.drawBars}},a};